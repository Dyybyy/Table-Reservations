<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Form</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <section>
        <div class="container">
            <div class="logo">
                <img src="img/file.png" alt="Restaurant Logo" style="background-color: #fa4c4c;">
            </div>
            
            <div class="contactInfo">
                <h2>Contact Info</h2>
                <ul class="info">
                    <li>
                        <span class="icon"><img src="img/location.png" alt="Location Icon"></span>
                        <span class="details">
                            Sulaymaniyah<br>
                            Aqare
                        </span>
                    </li>
                    <li>
                        <span class="icon"><img src="img/mail.png" alt="Mail Icon"></span>
                        <span class="details">Netcafe@gmail.com</span>
                    </li>
                    <li>
                        <span class="icon"><img src="img/call.png" alt="Call Icon"></span>
                        <span class="details">07708920909</span>
                    </li>
                </ul>
                <ul class="socialIcon">
                    <li><a href="https://www.facebook.com/amnasurakanetcafe/"><img src="img/1.png" alt="Facebook Icon"></a></li>
                    <li><a href="https://www.instagram.com/net_cafe.amna_suraka/?hl=en"><img src="img/3.png" alt="Instagram Icon"></a></li>
                </ul>
            </div>

            <div class="contactForm">
                <h2>Table Reservations</h2>
                
                <div class="reservation-note">
                    <p><strong>Note:</strong> All reservations end at 8:00 PM.</p>
                </div>
                
                <form>
                    <div class="formBox">
                        <div class="inputBox">
                            <input type="text" name="firstName" id="firstName" required>
                            <span>First Name</span>
                        </div>
                        <div class="inputBox">
                            <input type="text" name="lastName" id="lastName" required>
                            <span>Last Name</span>
                        </div>
                        <div class="inputBox">
                            <input type="email" name="email" id="email" required>
                            <span>Email</span>
                        </div>
                        <div class="inputBox">
                            <input type="tel" name="mobileNumber" id="mobileNumber" required pattern="(077[0-7]|075[0-7]|078[0-7])\d{7}">
                            <span>Mobile Number (Iraqi numbers only)</span>
                        </div>
                        <div class="inputBox">
                            <input type="number" name="peopleCount" id="peopleCount" min="1" max="20" required>
                            <span>How many people</span>
                        </div>
                        <div class="inputBox">
                            <input type="date" name="date" id="date" required>
                            <span>Date</span>
                        </div>
                        <div class="inputBox">
                            <input type="time" name="time" id="time" required>
                            <span>Time</span>
                        </div>
                        <div class="inputBox">
                            <textarea name="message" id="message" required></textarea>
                            <span>Write Your Message Here.</span>
                        </div>
                        <div class="inputBox">
                            <input type="submit" value="Submit">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <div id="modal" class="modal">
        <div class="modal-content">
            <h2 id="modal-message"></h2>
            <p>Thank you for your reservation. We look forward to serving you!</p>
            <button onclick="closeModal()">Close</button>
        </div>
    </div>

    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script>
        (function(){
            emailjs.init("7BYzg_CUnCpuaxYDm"); // Replace with your EmailJS user ID
        })();

        document.addEventListener('DOMContentLoaded', function () {
            const form = document.querySelector('form');
            const dateInput = document.getElementById('date');

            // Set the minimum date to today
            const today = new Date().toISOString().split('T')[0];
            dateInput.setAttribute('min', today);

            // Set the maximum date to tomorrow
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowISO = tomorrow.toISOString().split('T')[0];
            dateInput.setAttribute('max', tomorrowISO);

            // Event listener to update max attribute if date changes to today
            dateInput.addEventListener('input', function () {
                const selectedDate = new Date(this.value);
                if (selectedDate.toISOString().split('T')[0] === today) {
                    dateInput.setAttribute('max', tomorrowISO);
                }
            });

            form.addEventListener('submit', function (event) {
                event.preventDefault(); // Prevent the default form submission

                // Validate the mobile number
             

                // Send the form data using EmailJS
                emailjs.sendForm('service_yzf0i0q', 'template_91dte9w', this)
                    .then(function() {
                        document.getElementById('modal-message').textContent = 'Reservation Successful!';
                        document.getElementById('modal').style.display = 'block';
                        form.reset(); // Optionally reset the form after successful submission
                    }, function(error) {
                        document.getElementById('modal-message').textContent = 'Reservation Failed!';
                        document.getElementById('modal').style.display = 'block';
                    });
            });
        });

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        function isValidIraqiNumber(number) {
            return /^(077|078)\d{7}$/.test(number); // Validates if number starts with 077 or 078 and has 7 digits following
        }
    </script>
</body>
</html>
